## 基础

### 左值和右值

当一个对象被当做右值使用时，其实是使用对象的值；当一个对象被当做左值使用时，其实是使用对象在内存中的位置。在使用右值的地方可以使用左值来代替，但是在使用左值的地方不可以使用右值来代替。

对于`decltype`关键字，如果表达式返回值是左值，则作用于该表达式的decltype得到一个引用类型；如果是右值，则不变。例如：

```
int a = 1;
int *p = &a;
decltype(*p) r = a; //r为int &类型
decltype(&p) pp = nullptr; //pp 为int** 类型，&p返回值为右值

```

### 求值顺序

**优先级只是规定了运算对象的组合方式，并没有说明运算对象按照什么顺序求值**

有四种运算符规定了求值顺序，分别是：`&&、||、？:、，`。

编写符合表达式的建议：
- 拿不准的时候强制使用括号来保证满足运算要求
- 如果改变某个运算对象的值，则在该表达式的其他地方不要再使用这个运算对象。但是当改变该对象的子表达式本身就是另外一个运算对象时除外，例如：*++iter


### 算数运算符

- 算数运算符的运算对象和求值结果都是右值。
- C++11规定商一律向零取整
- (-m) / n 和 m / (-n)等价于 - (m / n);(-m) % n 等价于 -（m % n）,m % (-n)等价于 -（m % n）
- 优先级如下：
![](http://res.cloudinary.com/bytedance14/image/upload/v1531642643/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7_2018-07-15_%E4%B8%8B%E5%8D%884.15.12.png)

### 逻辑运算符和关系运算符

- 逻辑运算符和关系运算符的运算对象和求值结果都是右值
- 对于逻辑与运算，只有左侧值为真的时才对右侧对象求值；对于逻辑或运算，只有左侧值为假时才对右侧对象求值
- 优先级如下：
![](http://res.cloudinary.com/bytedance14/image/upload/v1531642654/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7_2018-07-15_%E4%B8%8B%E5%8D%884.15.22.png)

### 赋值运算符

- 结果为左侧运算符，并且为左值
- 变量类型与右边的变量相同或者可以由右边对象转换得到
- 赋值运算符优先级比较低

```
int i = get_value();

while (i != 42) {
    i = get_value();
}

```
上述代码可以转化成如下的方式：

```
int i;
while ((i = get_value()) != 42) {
    i = get_value();
}
```
- 复合赋值运算符只求一次值

### 递增和递减运算符

- 前置和后置版本作用于左值运算对象，前置版本将对象本身作为**左值**返回，后置版本将原始对象的拷贝值作为**右值**返回
- 后置运算符优先级高于解引用运算符优先级

#### 运算对象可以任意顺序求值

如果一个子条表达式改变了某个运算对象的值，另一条子表达式又要使用该值，运算对象的求值顺序很关键。
```
while (beg != s.end() && !isspace(*beg)) {
    *beg = toupper(*beg++)
}
```
对于`*beg = toupper(*beg++)`编译器有两种了解：
- 先求左侧的值: *beg = toupper(*beg)
- 先求右侧的值: *(beg + 1) = toupper(*beg)

### 成员访问运算符

- 解引用运算符优先级低于点运算符，执行解引用的运算的子表达式必须加括号
- 箭头运算符作用一个指针类型对象，结果是一个左值
- 对于点运算符，如果成员所属的对象是左值，结果是左值；如果成员所属的对象是右值，结果为右值

### 条件运算符
- 当条件运算符的两个表达式都是左值或者能够转换到同一种左值类型，运算结果是左值；否则结果是右值
- 条件运算符优先级比较低，在长表达式中通常加括号

### 位运算符
- 如果运算对象是有符号的且为负数，左移会改变符号位的位置
- 右侧运算符不能为负，并且不能超过结果的位数，否则产生未定义的结果
- 移除边界之外的就被舍弃了
- 如果运算对象是小整形，它会被**自动提升**为较大整型类型
- 左移运算符在右侧插入值为0的二进制；右移运算符则依赖于其左侧运算对象的对象，如果该运算对象是无符号类型，左侧插入值为0的二进制位，如果该运算对象是带符号类型，则在左侧插入符号位的副本或者0的二进制位
- 移位运算符优先级比算术运算符低，比关系运算符、赋值运算符和条件运算符的优先级高

### sizeof运算符

- 返回一个表达式或者类型名字所占的字节数，满足右结合律，返回`size_t`类型
- 对于`sizeof *p`,即使p是未初始化的指针也没关系，sizeof不需要解引用也可以知道对象类型
